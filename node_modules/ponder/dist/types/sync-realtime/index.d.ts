import type { Common } from '../internal/common.js';
import type { Factory, Network, Source } from '../internal/types.js';
import { type SyncProgress } from '../sync/index.js';
import type { LightBlock, SyncBlock, SyncLog, SyncTrace, SyncTransaction, SyncTransactionReceipt } from '../types/sync.js';
import type { Queue } from '../utils/queue.js';
import type { RequestQueue } from '../utils/requestQueue.js';
import { type Address } from "viem";
export type RealtimeSync = {
    start(args: {
        syncProgress: Pick<SyncProgress, "finalized">;
        initialChildAddresses: Map<Factory, Set<Address>>;
    }): Promise<Queue<void, BlockWithEventData>>;
    unfinalizedBlocks: LightBlock[];
    finalizedChildAddresses: Map<Factory, Set<Address>>;
    unfinalizedChildAddresses: Map<Factory, Set<Address>>;
    kill: () => void;
};
type CreateRealtimeSyncParameters = {
    common: Common;
    network: Network;
    requestQueue: RequestQueue;
    sources: Source[];
    onEvent: (event: RealtimeSyncEvent) => Promise<void>;
    onFatalError: (error: Error) => void;
};
export type BlockWithEventData = {
    block: SyncBlock;
    logs: SyncLog[];
    factoryLogs: SyncLog[];
    traces: SyncTrace[];
    transactions: SyncTransaction[];
    transactionReceipts: SyncTransactionReceipt[];
};
export type RealtimeSyncEvent = ({
    type: "block";
    hasMatchedFilter: boolean;
    endClock?: () => number;
} & BlockWithEventData) | {
    type: "finalize";
    block: LightBlock;
} | {
    type: "reorg";
    block: LightBlock;
    reorgedBlocks: LightBlock[];
};
export declare const createRealtimeSync: (args: CreateRealtimeSyncParameters) => RealtimeSync;
export {};
//# sourceMappingURL=index.d.ts.map